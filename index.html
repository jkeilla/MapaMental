<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Teste Mapa Mental</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="assets/css/cssGeral.css">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
</head>
<body>
    <header id="cabecalho">
        <div id="textocabecalho">Mapa Mental</div>
    </header>
    <div class="container">
        <br clear="both"/>
        <!-- PODE REMOVER DAQUI PARA BAIXO QUANDO NÂO PRECISAR SABER A COORDENADA 
        <div>
            <label>X1 <input type="text" size="4" id="x1" name="x1" /></label>
            <label>Y1 <input type="text" size="4" id="y1" name="y1" /></label>
            <label>X2 <input type="text" size="4" id="x2" name="x2" /></label>
            <label>Y2 <input type="text" size="4" id="y2" name="y2" /></label>
        </div>-->
        <div id="imagem">
            <img src="assets/img/fluxograma.jpg" usemap="#fluxograma" id="targetAAA"/>
            <map name="fluxograma">
                <!--<area shape="rect" coords="1, 4, 664, 563" title="TESTE" onclick="buscar('local17')"/>-->
                <area shape="circle" coords="583, 153, 38" title="Programa de Necessidades"  onclick="buscar('local1')"/>
                <area shape="circle" coords="583, 324, 38" title="Referencial Arquitetônico"  onclick="buscar('local2')"/>
                <area shape="circle" coords="583, 386, 38" title="Análise Programática"  onclick="buscar('local3')"/>
                <area shape="circle" coords="583, 449, 38" title="Pesquisa Referencial"  onclick="buscar('local4')"/>
                <area shape="circle" coords="316, 160, 38" title="Localização"  onclick="buscar('local5')"/>
                <area shape="circle" coords="282, 214, 38" title="Análise de Entorno"  onclick="buscar('local6')"/>
                <area shape="circle" coords="347, 214, 38" title="Análise do Terreno"  onclick="buscar('local7')"/>
                <area shape="circle" coords="316, 269, 38" title="Legislação"  onclick="buscar('local8')"/>
                <area shape="circle" coords="316, 389, 38" title="Conceito Arquitetônico"  onclick="buscar('local9')"/>
                <area shape="circle" coords="316, 456, 38" title="Referencial Simbólico"  onclick="buscar('local10')"/>
                <area shape="circle" coords="316, 517, 38" title="Tipologia"  onclick="buscar('local11')"/>
                <area shape="circle" coords="316, 579, 38" title="Partido Arquitetônico"  onclick="buscar('local12')"/>
                <area shape="circle" coords="316, 641, 38" title="Estudo da Volumetria"  onclick="buscar('local13')"/>
                <area shape="circle" coords="316, 707, 38" title="Geometria"  onclick="buscar('local14')"/>
                <area shape="circle" coords="75, 390, 38" title="Zoneamento"  onclick="buscar('local15')"/>
                <area shape="circle" coords="75, 455, 38" title="Pré-Dimensionamento"  onclick="buscar('local16')"/>
                <area shape="circle" coords="75, 517, 38" title="Organo-Fluxograma"  onclick="buscar('local17')"/>
                <area shape="circle" coords="75, 578, 38" title="Materiais Construtivos"  onclick="buscar('local18')"/>
                <area shape="circle" coords="75, 221, 38" title="Desenvolvimento Desenho Técnico"  onclick="buscar('local18')"/>
                
                
            </map>
        </div>
        <div id="informacao">
            <h3>Descrição</h3>
            <h4 id="informacao-titulo">---</h4>
            <p id="informacao-descricao">
                ----
            </p>
        </div>
    </div>
    
    <!-- MANTEM -->
    <script src="assets/js/jquery.min.js"></script>
    <script>
        function buscar(valor) {  
            $.get('assets/dados.json', (dados) => { //Se tiver rodando no servidor recupera os dados assim
                $('#informacao-titulo').html(dados[valor].titulo)
                $('#informacao-descricao').html(dados[valor].descricao)
            })
        }
    </script>
    <!-- REMOVE, DEPOIS QUE JÀ SOUBER AS COORDENADAS -->
    <script src="assets/js/jcrop/jquery.Jcrop.js"></script>   
    <script type="text/javascript">
        
        jQuery(function($){   
            var jcrop_api;
            $('#target').Jcrop({
                onChange:   showCoords,
                onSelect:   showCoords,
                onRelease:  clearCoords
            },function(){
                jcrop_api = this;
            });
            $('#coords').on('change','input',function(e){
                var x1 = $('#x1').val(),
                x2 = $('#x2').val(),
                y1 = $('#y1').val(),
                y2 = $('#y2').val();
                jcrop_api.setSelect([x1,y1,x2,y2]);
            });
            
        });
        
        // Simple event handler, called from onChange and onSelect
        // event handlers, as per the Jcrop invocation above
        function showCoords(c) {
            $('#x1').val(c.x);
            $('#y1').val(c.y);
            $('#x2').val(c.x2);
            $('#y2').val(c.y2);
        };
        
        function clearCoords() {
            $('#coords input').val('');
        };
    </script>
</body>
</html>